function square(e) { return e.rect(size, size) };
function half_square(e) { return e.rect(size / 2, size) };
function circle(e) { return e.circle(size, size) };

function crown(e) {
  //  this was create on a 128x128 grid.
  return e.path('M0,0l21.336,32l21.328,-32l21.336,32l21.336,-32l21.328,32l21.336,-32l0,128l-128,0l0,-128Z');
}

function tail(e) {
  return e.path('M64,0l-64,0c0,32 64,32 64,64c0,-32 64,-32 64,-64l-64,0Z');
}
function cross(e) {
  return e.path('M128,42.664l-42.664,0l0,-42.664l-42.672,0l0,42.664l-42.664,0l0,42.664l42.664,0l0,42.672l42.672,0l0,-42.672l42.664,0l0,-42.664Z');
}

function quarter_triangle(e) {
  return e.path('M0,128l64,-64l64,64l-128,0Z');
}

function third_rect(e) {
  return e.rect(128/3, 128).attr({ x: 128/3, y: 0 });
}

function rosette(e) {
  return e.path('M94.547,64c-3.632,-1.968 -6.672,-5.072 -8.376,-9.184c-1.704,-4.112 -1.744,-8.456 -0.568,-12.416c-3.96,1.176 -8.304,1.128 -12.416,-0.568c-4.112,-1.704 -7.216,-4.752 -9.184,-8.376c-1.968,3.624 -5.08,6.672 -9.184,8.376c-4.112,1.696 -8.456,1.744 -12.424,0.568c1.176,3.96 1.136,8.304 -0.568,12.416c-1.704,4.112 -4.744,7.216 -8.376,9.184c3.632,1.968 6.672,5.072 8.376,9.184c1.704,4.112 1.744,8.456 0.568,12.416c3.968,-1.176 8.312,-1.128 12.424,0.568c4.104,1.704 7.216,4.752 9.184,8.376c1.968,-3.624 5.072,-6.672 9.184,-8.376c4.112,-1.696 8.456,-1.744 12.416,-0.568c-1.176,-3.96 -1.136,-8.304 0.568,-12.416c1.704,-4.112 4.744,-7.216 8.376,-9.184');
}

function corner_circle(e) {
  return e.path('M64,0l-64,0l0,64c35.344,0 64,-28.656 64,-64');
}

function corner_triangle(e) {
  return e.path('M0,64l64,-64l-64,0l0,64Z');
}

function third_square(e) {
  return e.rect(128/3, 128/3).attr({ x: 128/3, y: 0 });
}

function l_third(e) {
  return e.path('M42.668,0l0,42.664l-42.664,0l0,42.672l85.328,0l0,-42.672l0,-42.664l-42.664,0Z');
}

function arc_third(e) {
  return e.path('M42.668,0c0,23.56 -19.104,42.664 -42.664,42.664l0,42.672c47.128,0 85.328,-38.208 85.328,-85.336l-42.664,0Z');
}

function arc_big(e) {
  return e.path('M64,0c0,35.344 -28.656,64 -64,64l0,64c70.688,0 128,-57.312 128,-128l-64,0Z');
}

function third_rod(e) {
  return e.path('M64,85.334c11.784,0 21.336,-9.552 21.336,-21.336l0,-64l-42.672,0l0,64c0,11.784 9.552,21.336 21.336,21.336');
}

function diamond(e) {
  return e.path('M0,64l64,-64l64,64l-64,64l-64,-64Z');
}

function big_quarter_circle(e) {
  return e.path('M128,0l-128,0l0,128c70.688,0 128,-57.312 128,-128');
}

function checkers_4(e) {
  let g = e.group();
  g.add(e.rect(32, 32).attr({ x: 64, y: 0  }));
  g.add(e.rect(32, 32).attr({ x: 96, y: 32 }));
  g.add(e.rect(32, 32).attr({ x: 32, y: 32 }));
  g.add(e.rect(32, 32).attr({ x: 0,  y: 0  }));
  g.add(e.rect(32, 32).attr({ x: 32, y: 96 }));
  g.add(e.rect(32, 32).attr({ x: 0,  y: 64 }));
  g.add(e.rect(32, 32).attr({ x: 64, y: 64 }));
  g.add(e.rect(32, 32).attr({ x: 96, y: 96 }));
  return g;
}

function half_tri(e) {
  return e.path('M0,128l128,-128l-128,0l0,128Z');
}

function third_circle(e) {
  return e.path('M85.332,64c0,11.784 -9.552,21.336 -21.336,21.336c-11.776,0 -21.328,-9.552 -21.328,-21.336c0,-11.784 9.552,-21.336 21.328,-21.336c11.784,0 21.336,9.552 21.336,21.336');
}

function waves_3(e) {
  return e.path('M0,0l85.337,0l0,0.004l42.659,0c0,11.784 -9.544,21.335 -21.327,21.335c-11.687,0 -21.179,-9.395 -21.334,-21.045c-0.157,11.648 -9.647,21.041 -21.333,21.041c-11.686,0 -21.177,-9.394 -21.333,-21.043c-0.156,11.649 -9.647,21.043 -21.334,21.043c-11.783,0 -21.335,-9.551 -21.335,-21.335Z');
}

function waves_2(e) {
  return e.path('M64,0c0,17.672 -14.328,32 -32,32c-17.672,0 -32,-14.328 -32,-32l64,0Zm64,0c0,17.672 -14.328,32 -32,32c-17.672,0 -32,-14.328 -32,-32l64,0Z');
}

function circles_4(e) {
  return e.path('M75.313,84.687c6.248,6.248 6.248,16.376 0,22.624c-6.248,6.248 -16.376,6.248 -22.624,0c-6.248,-6.248 -6.248,-16.376 0,-22.624c6.248,-6.248 16.376,-6.248 22.624,0Zm-32,-32c6.248,6.248 6.248,16.376 0,22.624c-6.248,6.248 -16.376,6.248 -22.624,0c-6.248,-6.248 -6.248,-16.376 0,-22.624c6.248,-6.248 16.376,-6.248 22.624,0Zm64,0c6.248,6.248 6.248,16.376 0,22.624c-6.248,6.248 -16.376,6.248 -22.624,0c-6.248,-6.248 -6.248,-16.376 0,-22.624c6.248,-6.248 16.376,-6.248 22.624,0Zm-32,-32c6.248,6.248 6.248,16.376 0,22.624c-6.248,6.248 -16.376,6.248 -22.624,0c-6.248,-6.248 -6.248,-16.376 0,-22.624c6.248,-6.248 16.376,-6.248 22.624,0Z');
}

function squares_4(e) {
  return e.path('M112,112l-32,0l0,-32l32,0l0,32Zm-64,0l-32,0l0,-32l32,0l0,32Zm0,-64l-32,0l0,-32l32,0l0,32Zm64,0l-32,0l0,-32l32,0l0,32Z');
}

function circles_4(e) {
  return e.path('M106.668,96c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-64,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm0,-64c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm64,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Z');
}

function circles_big_5(e) {
  return e.path('M49.066,98.133c0,10.608 -8.6,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.6 8.592,-19.2 19.2,-19.2c10.6,0 19.2,8.6 19.2,19.2Zm68.266,0c0,10.608 -8.592,19.2 -19.2,19.2c-10.6,0 -19.2,-8.592 -19.2,-19.2c0,-10.6 8.6,-19.2 19.2,-19.2c10.608,0 19.2,8.6 19.2,19.2Zm-34.133,-34.133c0,10.608 -8.592,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Zm-34.133,-34.133c0,10.6 -8.6,19.2 -19.2,19.2c-10.608,0 -19.2,-8.6 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.6,0 19.2,8.592 19.2,19.2Zm68.266,0c0,10.6 -8.592,19.2 -19.2,19.2c-10.6,0 -19.2,-8.6 -19.2,-19.2c0,-10.608 8.6,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Z');
}

function circles_small_5(e) {
  return e.path('M106.668,96c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-64,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm32,-32c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-32,-32c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm64,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Z');
}

function donuts_5(e) {
  return e.path('M115.199,96c0,10.608 -8.592,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Zm-64,0c0,10.608 -8.592,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Zm55.469,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-64,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm40.532,-32c0,10.608 -8.592,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Zm-8.531,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-42.546,-51.2c10.551,0.067 19.076,8.633 19.076,19.2c0,10.567 -8.525,19.133 -19.076,19.2l-0.124,0c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2l0.124,0Zm83.076,19.2c0,10.608 -8.592,19.2 -19.2,19.2c-10.608,0 -19.2,-8.592 -19.2,-19.2c0,-10.608 8.592,-19.2 19.2,-19.2c10.608,0 19.2,8.592 19.2,19.2Zm-8.531,0c0,5.888 -4.776,10.664 -10.664,10.664c-5.896,0 -10.672,-4.776 -10.672,-10.664c0,-5.888 4.776,-10.664 10.672,-10.664c5.888,0 10.664,4.776 10.664,10.664Zm-74.664,-10.664c-5.896,0 -10.672,4.776 -10.672,10.664c0,5.888 4.776,10.664 10.672,10.664l0.138,-0.001c5.824,-0.074 10.526,-4.821 10.526,-10.663c0,-5.842 -4.702,-10.589 -10.526,-10.663l-0.138,-0.001Z');
}

function third_rect_edge(e) {
  return e.rect(128, 128/3).attr({ x:0, y: 128 * 2/3 });
}

function chevron_full(e) {
  return e.path('M0,96l0,32l64,-64l64,64l0,-32l0,-32l-64,-64l-64,64l0,32Z');
}

function chevron_twothirds(e) {
  return e.path('M0,128l32,0l32,-32l32,32l32,0l0,-32l-64,-64l-64,64l0,32Z');
}

function four_burst(e) {
  return e.path('M64.003,63.996l21.333,-63.992l42.664,0l0,42.664l-63.996,21.335l63.992,21.333l0,42.664l-42.664,0l-21.335,-63.996l-21.333,63.992l-42.664,0l0,-42.664l63.996,-21.335l-63.992,-21.333l0,-42.664l42.664,0l21.335,63.996Zm-0.005,0.005l0.003,0.001l0.001,-0.003l-0.003,-0.001l-0.001,0.003Z');
}

const shapes = [ square,
                 half_square,
                 circle,
                 crown,
                 tail,
                 cross,
                 quarter_triangle, 
                 rosette,
                 third_rect,
                 corner_circle,
                 corner_triangle,
                 third_square,
                 l_third,
                 arc_third,
                 arc_big,
                 third_rod,
                 diamond,
                 big_quarter_circle,
                 checkers_4,
                 half_tri,
                 third_circle,
                 waves_3,
                 waves_2,
                 circles_4,
                 squares_4,
                 circles_big_5,
                 circles_small_5,
                 donuts_5,
                 third_rect_edge,
                 chevron_full,
                 chevron_twothirds,
                 four_burst
                 ];

function shape(element, index) {
  if (index < 0 || index >= shape.length) {
    index = 0;
  }
  return shapes[index](element);
}

function randomShape(element) {
  let s = shapes[Math.floor(Math.random() * shapes.length)];
  return s(element);
}
